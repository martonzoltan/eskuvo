(function(){var e={9396:function(e,t,n){"use strict";var i=n(9242),s=n(3396),o=n(7139),r=n.p+"img/fedolap.a19cfae1.jpeg";const a={class:"container"},l={class:"row"},c={class:"mt-4"},d={class:"upload-section d-flex justify-content-center"},u=["disabled"],g={key:0,class:"d-flex justify-content-center mt-2"},h=(0,s._)("div",{class:"row mt-4"},[(0,s._)("div",{class:"col"},[(0,s._)("div",{class:"header-image-container"},[(0,s._)("img",{src:r,alt:"Header Image",class:"img-fluid"})])])],-1),f={class:"row mt-4"},m={class:"col"},p={class:"grid-container"},v=["href"],b=["src"],w={key:1,controls:"",poster:r},y=["src"],I=["onClick"],k={key:0,class:"overlay"},_=(0,s._)("div",{class:"spinner-border text-primary",role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")],-1),C=[_];function F(e,t,n,i,r,_){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",a,[(0,s._)("div",l,[(0,s._)("div",c,[(0,s._)("div",d,[(0,s._)("input",{type:"file",ref:"fileInput",accept:"image/*, video/*",style:{display:"none"},onChange:t[0]||(t[0]=(...e)=>_.handleFileInputChange&&_.handleFileInputChange(...e)),multiple:""},null,544),(0,s._)("button",{class:"btn btn-success me-3",onClick:t[1]||(t[1]=(...e)=>_.openFileInput&&_.openFileInput(...e))}," Válaszd ki a képeket! "),(0,s._)("button",{disabled:_.isUploadDisabled,class:"btn btn-success",onClick:t[2]||(t[2]=(...e)=>_.uploadFiles&&_.uploadFiles(...e))}," Feltöltés ",8,u)]),_.selectedFilesCount>0?((0,s.wg)(),(0,s.iD)("div",g,(0,o.zw)(_.selectedFilesCount)+" feltöltésre kiválasztott fotó(k). ",1)):(0,s.kq)("",!0)])]),h,(0,s._)("div",f,[(0,s._)("div",m,[(0,s._)("div",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.images,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[_.isImage(e)?((0,s.wg)(),(0,s.iD)("a",{key:0,href:e,class:"grid-item"},[(0,s._)("img",{src:e,alt:"Image"},null,8,b)],8,v)):_.isVideo(e)?((0,s.wg)(),(0,s.iD)("video",w,[(0,s._)("source",{src:e},null,8,y),(0,s.Uk)(" Your browser does not support the video tag. ")])):(0,s.kq)("",!0),r.isAdmin?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:e=>_.showConfirmation(t),class:"btn btn-danger delete-button"}," x ",8,I)):(0,s.kq)("",!0)])))),128))])])])]),r.loading?((0,s.wg)(),(0,s.iD)("div",k,C)):(0,s.kq)("",!0)],64)}n(7658);var x=n(6304),O=n(4300),S={data(){return{isAdmin:!1,adminParam:"Edcvgy12!",images:[],lightbox:null,selectedFiles:[],connectionSAS:"https://weddingdz.blob.core.windows.net/?sv=2022-11-02&ss=bf&srt=sco&sp=rwdlaciyx&se=2023-08-31T00:17:58Z&st=2023-07-25T16:17:58Z&spr=https&sig=SNfN0s5QgF%2Bgjg83fRNYgeHfFPA%2BpN2yUv9ZJ%2BYFIzM%3D",containerName:"images",loading:!1,currentPage:0,hasMoreImages:!0,lightboxInitialized:!1}},computed:{isUploadDisabled(){return 0===this.selectedFiles.length},selectedFilesCount(){return this.selectedFiles.length}},async mounted(){const e=new URLSearchParams(window.location.search),t=e.get("admin");t==this.adminParam&&(this.isAdmin=!0),this.loading=!0,window.addEventListener("scroll",this.handleScroll),await this.fetchImages(),this.lightbox=new O.Z(".grid-container a"),this.lightboxInitialized=!0,this.loading=!1},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{async handleScroll(){const e=document.documentElement.scrollHeight-(window.innerHeight+window.scrollY),t=5;e<t&&(this.loading=!0,await this.fetchImages(),this.loading=!1)},async fetchImages(e=!1,t=10){try{if(!this.hasMoreImages)return;const n=new x.N(this.connectionSAS),i=n.getContainerClient(this.containerName),s=i.listBlobsFlat({prefix:"",includeMetadata:!0}),o=[];for await(const e of s)o.push(e);o.sort(((e,t)=>t.properties.createdOn.valueOf()-e.properties.createdOn.valueOf()));const r=(e?0:this.currentPage)*t,a=r+t;this.images=this.images.concat(o.slice(r,a).map((e=>i.getBlobClient(e.name).url))),e||this.currentPage++,await this.sleep(1e3),this.lightboxInitialized&&(this.lightbox.destroy(),this.lightbox=new O.Z(".grid-container a")),a>=o.length&&(this.hasMoreImages=!1)}catch(n){console.error("Error retrieving images:",n)}},openFileInput(){this.$refs.fileInput.click()},handleFileInputChange(e){this.selectedFiles=Array.from(e.target.files)},async uploadFiles(){this.loading=!0;try{const e=this.selectedFiles,t=new x.N(this.connectionSAS),n=t.getContainerClient(this.containerName);for(let i=0;i<e.length;i++){const t=e[i],s=this.generateUniqueBlobName(t.name),o=n.getBlockBlobClient(s);await o.uploadBrowserData(t)}this.selectedFiles=[],console.log("Files uploaded successfully!"),await this.fetchImages(!0)}catch(e){console.error("Error uploading files:",e)}this.loading=!1},generateUniqueBlobName(e){const t=Date.now(),n=e.substr(0,e.lastIndexOf(".")),i=e.substr(e.lastIndexOf("."));return`${n}_${t}${i}`},removeQueryParams(e){const t=e.indexOf("?");return-1!==t?e.substring(0,t):e},isImage(e){const t=this.removeQueryParams(e),n=t.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif"].includes(n)},isVideo(e){const t=this.removeQueryParams(e),n=t.split(".").pop().toLowerCase();return["mp4","mov","avi","mkv"].includes(n)},showConfirmation(e){confirm("Are you sure you want to delete this item?")&&this.deleteItem(e)},deleteItem(e){const t=this.images[e],n=new x.N(this.connectionSAS),i=n.getContainerClient(this.containerName),s=decodeURI(this.getImageBlobName(this.removeQueryParams(t)));i.deleteBlob(s).then((()=>{alert("Deleted"),this.images.splice(e,1)})).catch((e=>{alert("Error"),console.error("Error deleting blob:",e)}))},getImageBlobName(e){const t=e.split("/");return t[t.length-1]},sleep(e){return new Promise((t=>setTimeout(t,e)))}}},P=n(89);const N=(0,P.Z)(S,[["render",F]]);var j=N;(0,i.ri)(j).mount("#app")},4598:function(){}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,i,s,o){if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],o=e[d][2];for(var a=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/eskuvo/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,o,r=i[0],a=i[1],l=i[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)var d=l(n)}for(t&&t(i);c<r.length;c++)o=r[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},i=self["webpackChunkwedding_photos_upload"]=self["webpackChunkwedding_photos_upload"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(9396)}));i=n.O(i)})();
//# sourceMappingURL=app.92d55b7b.js.map